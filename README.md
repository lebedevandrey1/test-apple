# DARS TEST

## Технические данные

| Окружение      | Версия |
| --------- | -----|
| PHP  | 8.1.23 |
| Сервер     |  Apache/2.4.57 (Debian) |
| База данных      |    MariaDB 10.11 |
| Yii Version      |   2.0.49.3 |
| Yii Template      |   Advanced |

## Тестовое задание

Описание задания находится в файле TASK.md

## Копирование настроек окружения

Выполняем настройку проекта с помощью makefile.

`$ make start-init`

Настраиваем **.env** и **docker-compose.yml** в корне проекта под свое окружение и далее выполняем:

`$ make up`

`$ make migrate`

Если make не установлен в системе, выполняем следующие команды:

`$ cp .dev/init/.env.dist .env`

`$ cp .dev/init/docker-compose.yml.dist docker-compose.yml`

Настраиваем **.env** и **docker-compose.yml** в корне проекта под свое окружение и далее выполняем:

`$ docker-compose down -v --remove-orphans`

`$ docker-compose up -d`

`$ php init --silent=y --overwrite=All --env=Development`

`$ composer install --prefer-dist --no-interaction`

`$ docker exec -it apple_frontend_1 yii migrate`



Проект готов. Эндпоинты окружения:
1. Фронт: http://localhost:20080
2. Бэкенд: http://localhost:21080
3. БД: http://localhost:22080 : логин и пароль находятся в файле .env
4. Пользователь в приложении логин / пароль : admin / admin123


## Что было сделано в проекте
+ Установлен новый проект Yii2 Advanced
+ Настроен докер и локальное окружение
+ Настроен доступ в приложение по логину и паролю
+ Задания по ТЗ были выполнены в backend части приложения. Страница в меню - Apples
+ За основу был взят простой CRUD и туда впилены все фичи по ТЗ
+ Была сделана полная настройка репозиториев и скоупов для работы с БД
+ Придерживался принципа, что тестовые задания существуют не столько для выполнения задания, сколько для проверки навыков и знаний. Поэтому много чего добавил, чего ТЗ не требовало


## Комментарии
+ Немного не понятно ТЗ. В одной его части написано, что "Когда съедено - удаляется из массива яблок", а в другой "На странице в приложении должны быть отображены все яблоки". В моем приложении все съеденные яблоки скрываются из массива
+ Переменная "статус (на дереве / упало)" на мой взгляд лишняя в БД, т.к. этот статус можно вытащить из колонки "дата падения". Добавил эту переменную в БД, т.к. написано в ТЗ
+ Не делал гибкой настройки кол-ва часов, при котором упавшее яблоко считается испорченным. По ТЗ 5 часов
+ Не совсем согласен с пунктом "Бросить исключение - Съесть нельзя, яблоко на дереве". На мой взгляд это не должно быть исключением, т.к. его необходимо обрабатывать. Здесь более уместна будет именно валидация, т.к. данные о действиях идут через форму. Реализовал ее, хотя выбросить исключение было бы проще для реализации
+ Добавил в таблицу гибкости: каждый string фильтр таблицы принимает множественные значения через запятую. Например: "1, 5" или "название1, название2"
+ Поскольку бизнес-логики в приложении практически нет, не увидел смысла писать тесты. Это сделано для экономии времени, т.к. на любом проекте, даже самом небольшом, тесты must have
+ Если в форме одновременно выбирается сколько процентов яблока надкусить и тут же ставится радио, что яблоко надо съесть - приоритет отдается съедению яблока. Логика простая: сначала вы захотели яблоко надкусить на выбранное кол-во процентов, а потом решили его съесть
+ Съеденные яблоки исчезают из таблицы, т.к. "Когда съедено - удаляется из массива яблок"
+ Буду благодарен обратной связи по тестовому заданию, даже отрицательной